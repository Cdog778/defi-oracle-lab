{
  "_format": "hh-sol-artifact-1",
  "contractName": "TWAPOracle",
  "sourceName": "contracts/TWAPOracle.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_amm",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_initialUpdater",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "price",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "blockNumber",
          "type": "uint256"
        }
      ],
      "name": "PriceUpdated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "twapPrice",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "dataPoints",
          "type": "uint256"
        }
      ],
      "name": "TWAPCalculated",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "MAX_PRICE_POINTS",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "MIN_UPDATE_INTERVAL",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "TWAP_WINDOW",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "updater",
          "type": "address"
        }
      ],
      "name": "addAuthorizedUpdater",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "amm",
      "outputs": [
        {
          "internalType": "contract IAMM",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "authorizedUpdaters",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "emergencyUpdatePrice",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getPriceHistoryLength",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getPriceStats",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "latestPrice",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "twapPrice",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "dataPoints",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "oldestTimestamp",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getTWAP",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "minDataPoints",
          "type": "uint256"
        }
      ],
      "name": "getTWAPWithMinPoints",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "maxDeviationBPS",
          "type": "uint256"
        }
      ],
      "name": "isPriceWithinDeviation",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "lastUpdateTime",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "priceHistory",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "price",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "blockNumber",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "updater",
          "type": "address"
        }
      ],
      "name": "removeAuthorizedUpdater",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "updatePrice",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "0x60a060408181523462000305578082620010ec80380380916200002382856200030a565b8339810103126200030557816200003e6200004c9362000344565b906020938480920162000344565b6001600160a01b039283166080819052921660009081526001808352848220805460ff191682179055845163371dbeaf60e21b815260049690949192918590889082905afa938415620002f9578194620002c0575b50845195606087016001600160401b03811188821017620002ad578652848752838701428152868801904382528354680100000000000000008110156200029a578086620000f29201865562000359565b919091620002885788999896979851825551858201556002809251910155603283541162000165575b50505050600080516020620010cc83398151915291426002558151904282524390820152a251610d4090816200038c82396080518181816104f4015281816109510152610a8d0152f35b929350909182845b620001e5575b505081548015620001d25760001901926200018e8462000359565b929092620001c0575082825581018290556002018190555582600080516020620010cc8339815191523880806200011b565b634e487b7160e01b8452839052602483fd5b634e487b7160e01b835260318252602483fd5b835460001981019081116200026f5781101562000282578481018082116200026f57620002129062000359565b506200021e8262000359565b9190916200025d579181848489969587950362000242575b5050500190916200016d565b80548355848101548584015581015491015538838162000236565b634e487b7160e01b8652858552602486fd5b634e487b7160e01b855260118452602485fd5b62000173565b634e487b7160e01b8552848452602485fd5b634e487b7160e01b855260418452602485fd5b634e487b7160e01b835260418252602483fd5b9093508281813d8311620002f1575b620002db81836200030a565b81010312620002ed57519238620000a1565b8380fd5b503d620002cf565b508451903d90823e3d90fd5b600080fd5b601f909101601f19168101906001600160401b038211908210176200032e57604052565b634e487b7160e01b600052604160045260246000fd5b51906001600160a01b03821682036200030557565b90600091825481101562000377578280526003602084209102019190565b634e487b7160e01b83526032600452602483fdfe608060408181526004918236101561001657600080fd5b600092833560e01c91826305ecd00314610523575081632a943945146104df5781632d930b24146104aa5781633d81c9d814610479578163509e2c1a14610341578163603cda09146102f0578163673a7e28146102715781636d6f625e146102555781638c9b9fdc146102015781638ff29cfe146101c2578163a3c85a2314610199578163a524c7ea1461017c578163b27a04841461012d57508063bd3be27c14610112578063c8f33c91146100f45763e2c1d1d1146100d557600080fd5b346100f057816003193601126100f0576020905161012c8152f35b5080fd5b50346100f057816003193601126100f0576020906002549051908152f35b50346100f057816003193601126100f05760209051603c8152f35b90503461017857602036600319011261017857359180548310156101755750610157606092610733565b50805491600260018301549201549181519384526020840152820152f35b80fd5b8280fd5b5050346100f057816003193601126100f057602091549051908152f35b82843461017557602036600319011261017557506101b960209235610930565b90519015158152f35b90503461017857602036600319011261017857356001600160a01b0381169081900361017857818360ff92602095526001855220541690519015158152f35b90503461017857602036600319011261017857356001600160a01b0381169081900361017857338352600160205261023e60ff83852054166108e4565b825260016020528120600160ff1982541617905580f35b5050346100f057816003193601126100f0576020905160328152f35b91905034610178578260031936011261017857600254603c81018091116102dd5742106102a457826102a1610a73565b80f35b906020606492519162461bcd60e51b83528201526013602482015272155c19185d19481d1bdbc8199c995c5d595b9d606a1b6044820152fd5b634e487b7160e01b845260118352602484fd5b90503461017857602036600319011261017857356001600160a01b0381169081900361017857338352600160205261032d60ff83852054166108e4565b825260016020528120805460ff1916905580f35b8383346100f057602092836003193601126101785761012b1942014281116104665783548491825b828110610434575050508135116103e05783825180926305ecd00360e01b825281305afa9283156103d55780936103a3575b505051908152f35b909192508382813d83116103ce575b6103bc81836107e0565b8101031261017557505190838061039b565b503d6103b2565b8251903d90823e3d90fd5b83608492519162461bcd60e51b8352820152602a60248201527f496e73756666696369656e74206461746120706f696e747320666f722072656c60448201526906961626c6520545741560b41b6064820152fd5b81600161044083610733565b5001541015610452575b600101610369565b9261045e6001916107b1565b93905061044a565b634e487b7160e01b845260118252602484fd5b5050346100f057816003193601126100f05760ff6104a2913384526001602052832054166108e4565b6102a1610a73565b5050346100f057816003193601126100f0576080906104c7610818565b92939091815194855260208501528301526060820152f35b5050346100f057816003193601126100f057517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b908492503461017857826003193601126101785782549182156106f3575061012b194201428111610466578392848092815b8381106105fc5750505050156105c257821561057f5760208461057885856107c0565b9051908152f35b606490602085519162461bcd60e51b8352820152601a60248201527f496e76616c6964207765696768742063616c63756c6174696f6e0000000000006044820152fd5b606490602085519162461bcd60e51b835282015260146024820152734e6f20726563656e74207072696365206461746160601b6044820152fd5b61060581610733565b5082600180920154101561061d575b50600101610555565b949796909460001985018581116106995786036106bf5761064a8161064188610733565b50015442610781565b9081018091116106ac57905b61065f86610733565b50549082820291808304841490151715610699576001926106866106929361068c936107a4565b996107a4565b986107b1565b9490610614565b634e487b7160e01b855260118852602485fd5b634e487b7160e01b845260118752602484fd5b8086018087116106995790806106d76106ed93610733565b500154906106e488610733565b50015490610781565b90610656565b602060649262461bcd60e51b8352820152601760248201527f4e6f207072696365206461746120617661696c61626c650000000000000000006044820152fd5b90600091825481101561076d57600390838052027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563019190565b634e487b7160e01b83526032600452602483fd5b9190820391821161078e57565b634e487b7160e01b600052601160045260246000fd5b9190820180921161078e57565b600019811461078e5760010190565b81156107ca570490565b634e487b7160e01b600052601260045260246000fd5b90601f8019910116810190811067ffffffffffffffff82111761080257604052565b634e487b7160e01b600052604160045260246000fd5b600080549081156108da5760001982018281116108c65761083890610733565b5054926040516305ecd00360e01b8152602081600481305afa9081156108bb578391610889575b50929180527f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5645490565b90506020813d6020116108b3575b816108a4602093836107e0565b8101031261017857513861085f565b3d9150610897565b6040513d85823e3d90fd5b634e487b7160e01b82526011600452602482fd5b9182915081908190565b156108eb57565b60405162461bcd60e51b815260206004820152601f60248201527f4e6f7420617574686f72697a656420746f2075706461746520707269636573006044820152606490fd5b6000805415610a6e5760405163371dbeaf60e21b81526020919082816004817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa908115610a63578291610a36575b506040516305ecd00360e01b81528381600481305afa9384156108bb578394610a06575b5050828082116000146109fc576109c391610781565b90612710918281029281840414901517156109e85750906109e3916107c0565b111590565b634e487b7160e01b81526011600452602490fd5b906109c391610781565b9080929450813d8311610a2f575b610a1e81836107e0565b810103126100f057519138806109ad565b503d610a14565b90508281813d8311610a5c575b610a4d81836107e0565b810103126100f0575138610989565b503d610a43565b6040513d84823e3d90fd5b905090565b6040805163371dbeaf60e21b8152600492916020808386817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa928315610cff57600093610ccb575b5081516060810181811067ffffffffffffffff821117610cb657835283815281810190428252838101904382526000549268010000000000000000841015610ca157610b19600194858101600055610733565b929092610c735751825551838201556002809251910155603260005411610b74575b50507f15819dd2fd9f6418b142e798d08a18d0bf06ea368f4480b7b0d3f75bd966bc4892939450426002558151904282524390820152a2565b6000825b610c05575b50506000548015610bf0576000190190610b9682610733565b979097610bdc575060028760008093817f15819dd2fd9f6418b142e798d08a18d0bf06ea368f4480b7b0d3f75bd966bc48999a9b55820155015560005584939238610b3b565b600090634e487b7160e01b82525260246000fd5b603187634e487b7160e01b6000525260246000fd5b6000546000198101908111610c8757811015610c9c57828101808211610c8757610c2e90610733565b50610c3882610733565b919091610c735791818484879695879503610c59575b505050019091610b78565b805483558481015485840155810154910155388381610c4e565b60008a634e487b7160e01b82525260246000fd5b601189634e487b7160e01b6000525260246000fd5b610b7d565b604189634e487b7160e01b6000525260246000fd5b604187634e487b7160e01b6000525260246000fd5b9080935081813d8311610cf8575b610ce381836107e0565b81010312610cf357519138610ac6565b600080fd5b503d610cd9565b82513d6000823e3d90fdfea2646970667358221220b69b0b815f48f170f4fd2d7d12f9fd3f5aaac531be8c18d48753063edf3a951564736f6c6343000818003315819dd2fd9f6418b142e798d08a18d0bf06ea368f4480b7b0d3f75bd966bc48",
  "deployedBytecode": "0x608060408181526004918236101561001657600080fd5b600092833560e01c91826305ecd00314610523575081632a943945146104df5781632d930b24146104aa5781633d81c9d814610479578163509e2c1a14610341578163603cda09146102f0578163673a7e28146102715781636d6f625e146102555781638c9b9fdc146102015781638ff29cfe146101c2578163a3c85a2314610199578163a524c7ea1461017c578163b27a04841461012d57508063bd3be27c14610112578063c8f33c91146100f45763e2c1d1d1146100d557600080fd5b346100f057816003193601126100f0576020905161012c8152f35b5080fd5b50346100f057816003193601126100f0576020906002549051908152f35b50346100f057816003193601126100f05760209051603c8152f35b90503461017857602036600319011261017857359180548310156101755750610157606092610733565b50805491600260018301549201549181519384526020840152820152f35b80fd5b8280fd5b5050346100f057816003193601126100f057602091549051908152f35b82843461017557602036600319011261017557506101b960209235610930565b90519015158152f35b90503461017857602036600319011261017857356001600160a01b0381169081900361017857818360ff92602095526001855220541690519015158152f35b90503461017857602036600319011261017857356001600160a01b0381169081900361017857338352600160205261023e60ff83852054166108e4565b825260016020528120600160ff1982541617905580f35b5050346100f057816003193601126100f0576020905160328152f35b91905034610178578260031936011261017857600254603c81018091116102dd5742106102a457826102a1610a73565b80f35b906020606492519162461bcd60e51b83528201526013602482015272155c19185d19481d1bdbc8199c995c5d595b9d606a1b6044820152fd5b634e487b7160e01b845260118352602484fd5b90503461017857602036600319011261017857356001600160a01b0381169081900361017857338352600160205261032d60ff83852054166108e4565b825260016020528120805460ff1916905580f35b8383346100f057602092836003193601126101785761012b1942014281116104665783548491825b828110610434575050508135116103e05783825180926305ecd00360e01b825281305afa9283156103d55780936103a3575b505051908152f35b909192508382813d83116103ce575b6103bc81836107e0565b8101031261017557505190838061039b565b503d6103b2565b8251903d90823e3d90fd5b83608492519162461bcd60e51b8352820152602a60248201527f496e73756666696369656e74206461746120706f696e747320666f722072656c60448201526906961626c6520545741560b41b6064820152fd5b81600161044083610733565b5001541015610452575b600101610369565b9261045e6001916107b1565b93905061044a565b634e487b7160e01b845260118252602484fd5b5050346100f057816003193601126100f05760ff6104a2913384526001602052832054166108e4565b6102a1610a73565b5050346100f057816003193601126100f0576080906104c7610818565b92939091815194855260208501528301526060820152f35b5050346100f057816003193601126100f057517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b908492503461017857826003193601126101785782549182156106f3575061012b194201428111610466578392848092815b8381106105fc5750505050156105c257821561057f5760208461057885856107c0565b9051908152f35b606490602085519162461bcd60e51b8352820152601a60248201527f496e76616c6964207765696768742063616c63756c6174696f6e0000000000006044820152fd5b606490602085519162461bcd60e51b835282015260146024820152734e6f20726563656e74207072696365206461746160601b6044820152fd5b61060581610733565b5082600180920154101561061d575b50600101610555565b949796909460001985018581116106995786036106bf5761064a8161064188610733565b50015442610781565b9081018091116106ac57905b61065f86610733565b50549082820291808304841490151715610699576001926106866106929361068c936107a4565b996107a4565b986107b1565b9490610614565b634e487b7160e01b855260118852602485fd5b634e487b7160e01b845260118752602484fd5b8086018087116106995790806106d76106ed93610733565b500154906106e488610733565b50015490610781565b90610656565b602060649262461bcd60e51b8352820152601760248201527f4e6f207072696365206461746120617661696c61626c650000000000000000006044820152fd5b90600091825481101561076d57600390838052027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563019190565b634e487b7160e01b83526032600452602483fd5b9190820391821161078e57565b634e487b7160e01b600052601160045260246000fd5b9190820180921161078e57565b600019811461078e5760010190565b81156107ca570490565b634e487b7160e01b600052601260045260246000fd5b90601f8019910116810190811067ffffffffffffffff82111761080257604052565b634e487b7160e01b600052604160045260246000fd5b600080549081156108da5760001982018281116108c65761083890610733565b5054926040516305ecd00360e01b8152602081600481305afa9081156108bb578391610889575b50929180527f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5645490565b90506020813d6020116108b3575b816108a4602093836107e0565b8101031261017857513861085f565b3d9150610897565b6040513d85823e3d90fd5b634e487b7160e01b82526011600452602482fd5b9182915081908190565b156108eb57565b60405162461bcd60e51b815260206004820152601f60248201527f4e6f7420617574686f72697a656420746f2075706461746520707269636573006044820152606490fd5b6000805415610a6e5760405163371dbeaf60e21b81526020919082816004817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa908115610a63578291610a36575b506040516305ecd00360e01b81528381600481305afa9384156108bb578394610a06575b5050828082116000146109fc576109c391610781565b90612710918281029281840414901517156109e85750906109e3916107c0565b111590565b634e487b7160e01b81526011600452602490fd5b906109c391610781565b9080929450813d8311610a2f575b610a1e81836107e0565b810103126100f057519138806109ad565b503d610a14565b90508281813d8311610a5c575b610a4d81836107e0565b810103126100f0575138610989565b503d610a43565b6040513d84823e3d90fd5b905090565b6040805163371dbeaf60e21b8152600492916020808386817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa928315610cff57600093610ccb575b5081516060810181811067ffffffffffffffff821117610cb657835283815281810190428252838101904382526000549268010000000000000000841015610ca157610b19600194858101600055610733565b929092610c735751825551838201556002809251910155603260005411610b74575b50507f15819dd2fd9f6418b142e798d08a18d0bf06ea368f4480b7b0d3f75bd966bc4892939450426002558151904282524390820152a2565b6000825b610c05575b50506000548015610bf0576000190190610b9682610733565b979097610bdc575060028760008093817f15819dd2fd9f6418b142e798d08a18d0bf06ea368f4480b7b0d3f75bd966bc48999a9b55820155015560005584939238610b3b565b600090634e487b7160e01b82525260246000fd5b603187634e487b7160e01b6000525260246000fd5b6000546000198101908111610c8757811015610c9c57828101808211610c8757610c2e90610733565b50610c3882610733565b919091610c735791818484879695879503610c59575b505050019091610b78565b805483558481015485840155810154910155388381610c4e565b60008a634e487b7160e01b82525260246000fd5b601189634e487b7160e01b6000525260246000fd5b610b7d565b604189634e487b7160e01b6000525260246000fd5b604187634e487b7160e01b6000525260246000fd5b9080935081813d8311610cf8575b610ce381836107e0565b81010312610cf357519138610ac6565b600080fd5b503d610cd9565b82513d6000823e3d90fdfea2646970667358221220b69b0b815f48f170f4fd2d7d12f9fd3f5aaac531be8c18d48753063edf3a951564736f6c63430008180033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
